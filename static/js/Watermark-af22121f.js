import{g as e,r as t,w as a,M as n,aD as r,v as o,F as l,ar as i}from"./index-f9778aca.js";const s=i(e({__name:"Watermark",props:{text:{default:"https://github.com/Huo-zai-feng-lang-li"}},setup(e){const i=t(null),s=e;function u(e){if(!e||e===document.body)return"rgb(255, 255, 255)";const t=(a=e,n="background-color",window.getComputedStyle(a,null).getPropertyValue(n));var a,n;return"rgba(0, 0, 0, 0)"===t||"transparent"===t?u(e.parentElement):t}a((()=>s.text),((e,t)=>{e!==t&&c()}));const c=()=>{var e;const t=s.text,a=document.createElement("canvas"),n=a.getContext("2d");if(!n)return;n.font="16px Arial";const r=n.measureText(t).width,o=window.devicePixelRatio||1;a.width=(r+50)*o,a.height=32*o,n.scale(o,o),n.font="16px Arial";const l=(e=>{const t=e.match(/\d+/g);let a;if(t){const[e,n,r]=t.map(Number);a=(299*e+587*n+114*r)/1e3}else a=255;return a<128})(u(i.value))?"rgba(255,255,255,0.005)":"rgba(0,0,0,0.005)";n.fillStyle=l,n.textAlign="center",n.fillText(t,a.width/o/2,a.height/(2*o));const c=null==(e=i.value)?void 0:e.style;c&&(c.position="fixed",c.top="0",c.left="0",c.width="100%",c.height="100%",c.zIndex="9999",c.pointerEvents="none",c.backgroundImage=`url(${a.toDataURL("image/png")})`,c.backgroundRepeat="repeat",c.backgroundSize=`${a.width/o}px ${a.height/o}px`)};let d=null;return n((()=>{c(),i.value&&(d=new MutationObserver((()=>c())),d.observe(i.value,{attributes:!0,childList:!0,subtree:!0}))})),r((()=>{i.value&&(i.value.style.backgroundImage=""),d&&(d.disconnect(),d=null)})),(e,t)=>(o(),l("div",{ref_key:"watermarkContainer",ref:i,class:"waterMask"},null,512))}}),[["__scopeId","data-v-6e8b3418"]]);export{s as default};