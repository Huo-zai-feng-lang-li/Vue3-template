import{a3 as e,ax as o,k as t,bq as n,s as l,a8 as a,w as s,L as u,aE as c,br as d,aG as r,X as i,c as p,e as f,g as y,R as m,H as v,U as b,$ as C,W as g,aH as x,r as k,bf as M,m as S,at as B,p as h,n as w,M as I,bs as F}from"./index-f9778aca.js";import{P as E}from"./vnode-f085150a.js";import{i as D}from"./icon-8ee75a79.js";import{U as O}from"./event-b1948b12.js";import{u as z}from"./index-928a3db6.js";import{g as A}from"./scroll-957f651b.js";const L=e=>{if(!e)return{onClick:i,onMousedown:i,onMouseup:i};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}},T=p({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:f([String,Array,Object])},zIndex:{type:f([String,Number])}});const j=y({name:"ElOverlay",props:T,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:n}){const l=t("overlay"),{onClick:a,onMousedown:s,onMouseup:u}=L(e.customMaskEvent?void 0:e=>{n("click",e)});return()=>e.mask?m("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:u},[v(o,"default")],E.STYLE|E.CLASS|E.PROPS,["onClick","onMouseup","onMousedown"]):b("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[v(o,"default")])}}),N=p({center:Boolean,alignCenter:Boolean,closeIcon:{type:D},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),P={close:()=>!0},$=p({...N,appendToBody:Boolean,appendTo:{type:f(String),default:"body"},beforeClose:{type:f(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),H={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[O]:e=>C(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},R=(i,p)=>{var f;const y=g().emit,{nextZIndex:m}=x();let v="";const b=z(),C=z(),E=k(!1),D=k(!1),L=k(!1),T=k(null!=(f=i.zIndex)?f:m());let j,N;const P=M("namespace",F),$=S((()=>{const e={},o=`--${P.value}-dialog`;return i.fullscreen||(i.top&&(e[`${o}-margin-top`]=i.top),i.width&&(e[`${o}-width`]=B(i.width))),e})),H=S((()=>i.alignCenter?{display:"flex"}:{}));function R(){null==N||N(),null==j||j(),i.openDelay&&i.openDelay>0?({stop:j}=l.useTimeoutFn((()=>Y()),i.openDelay)):Y()}function U(){null==j||j(),null==N||N(),i.closeDelay&&i.closeDelay>0?({stop:N}=l.useTimeoutFn((()=>q()),i.closeDelay)):q()}function V(){i.beforeClose?i.beforeClose((function(e){e||(D.value=!0,E.value=!1)})):U()}function Y(){l.isClient&&(E.value=!0)}function q(){E.value=!1}return i.lockScroll&&((i,p={})=>{e(i)||o("[useLockscreen]","You need to pass a ref param to this function");const f=p.ns||t("popup"),y=n((()=>f.bm("parent","hidden")));if(!l.isClient||a(document.body,y.value))return;let m=0,v=!1,b="0";const C=()=>{setTimeout((()=>{r(null==document?void 0:document.body,y.value),v&&document&&(document.body.style.width=b)}),200)};s(i,(e=>{if(!e)return void C();v=!a(document.body,y.value),v&&(b=document.body.style.width),m=A(f.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,t=u(document.body,"overflowY");m>0&&(o||"scroll"===t)&&v&&(document.body.style.width=`calc(100% - ${m}px)`),c(document.body,y.value)})),d((()=>C()))})(E),s((()=>i.modelValue),(e=>{e?(D.value=!1,R(),L.value=!0,T.value=h.isUndefined(i.zIndex)?m():T.value++,w((()=>{y("open"),p.value&&(p.value.scrollTop=0)}))):E.value&&U()})),s((()=>i.fullscreen),(e=>{p.value&&(e?(v=p.value.style.transform,p.value.style.transform=""):p.value.style.transform=v)})),I((()=>{i.modelValue&&(E.value=!0,L.value=!0,R())})),{afterEnter:function(){y("opened")},afterLeave:function(){y("closed"),y(O,!1),i.destroyOnClose&&(L.value=!1)},beforeLeave:function(){y("close")},handleClose:V,onModalClick:function(){i.closeOnClickModal&&V()},close:U,doClose:q,onOpenAutoFocus:function(){y("openAutoFocus")},onCloseAutoFocus:function(){y("closeAutoFocus")},onCloseRequested:function(){i.closeOnPressEscape&&V()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:b,bodyId:C,closed:D,style:$,overlayDialogStyle:H,rendered:L,visible:E,zIndex:T}};export{j as E,P as a,$ as b,H as c,N as d,L as e,R as u};