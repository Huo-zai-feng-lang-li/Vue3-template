import{c as e,g as s,k as t,m as n,a6 as a,v as o,F as l,H as r,R as u,y as i,Q as d,G as p,z as c,q as m,I as f,a4 as g,T as y,_ as v,a5 as x,e as b,s as C,b8 as h,a$ as T,r as N,M as _,w as B,x as S,A as k,D as I,E as L,C as M,N as $,B as w,b9 as E,aK as z,ba as H,K as D,bb as j,aF as F,bc as R}from"./index-f9778aca.js";import{m as U}from"./typescript-a312af3e.js";import{i as q,T as A,a as O}from"./icon-8ee75a79.js";import{E as K}from"./aria-bf06b440.js";const Z=e({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),G=["textContent"],J=s({name:"ElBadge"});const Q=x(v(s({...J,props:Z,setup(e,{expose:s}){const v=e,x=t("badge"),b=n((()=>v.isDot?"":a(v.value)&&a(v.max)&&v.max<v.value?`${v.max}+`:`${v.value}`));return s({content:b}),(e,s)=>(o(),l("div",{class:c(m(x).b())},[r(e.$slots,"default"),u(y,{name:`${m(x).namespace.value}-zoom-in-center`,persisted:""},{default:i((()=>[d(p("sup",{class:c([m(x).e("content"),m(x).em("content",e.type),m(x).is("fixed",!!e.$slots.default),m(x).is("dot",e.isDot)]),textContent:f(m(b))},null,10,G),[[g,!e.hidden&&(m(b)||e.isDot)]])])),_:1},8,["name"])],2))}}),[["__file","badge.vue"]])),P=["success","info","warning","error"],V=U({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:C.isClient?document.body:void 0}),W=e({customClass:{type:String,default:V.customClass},center:{type:Boolean,default:V.center},dangerouslyUseHTMLString:{type:Boolean,default:V.dangerouslyUseHTMLString},duration:{type:Number,default:V.duration},icon:{type:q,default:V.icon},id:{type:String,default:V.id},message:{type:b([String,Object,Function]),default:V.message},onClose:{type:b(Function),required:!1},showClose:{type:Boolean,default:V.showClose},type:{type:String,values:P,default:V.type},offset:{type:Number,default:V.offset},zIndex:{type:Number,default:V.zIndex},grouping:{type:Boolean,default:V.grouping},repeatNum:{type:Number,default:V.repeatNum}}),X=h([]),Y=e=>{const{prev:s}=(e=>{const s=X.findIndex((s=>s.id===e)),t=X[s];let n;return s>0&&(n=X[s-1]),{current:t,prev:n}})(e);return s?s.vm.exposed.bottom.value:0},ee=["id"],se=["innerHTML"],te=s({name:"ElMessage"});var ne=v(s({...te,props:W,emits:{destroy:()=>!0},setup(e,{expose:s}){const t=e,{Close:a}=O,{ns:v,zIndex:x}=T("message"),{currentZIndex:b,nextZIndex:h}=x,E=N(),z=N(!1),H=N(0);let D;const j=n((()=>t.type?"error"===t.type?"danger":t.type:"info")),F=n((()=>{const e=t.type;return{[v.bm("icon",e)]:e&&A[e]}})),R=n((()=>t.icon||A[t.type]||"")),U=n((()=>Y(t.id))),q=n((()=>((e,s)=>X.findIndex((s=>s.id===e))>0?20:s)(t.id,t.offset)+U.value)),Z=n((()=>H.value+q.value)),G=n((()=>({top:`${q.value}px`,zIndex:b.value})));function J(){0!==t.duration&&({stop:D}=C.useTimeoutFn((()=>{V()}),t.duration))}function P(){null==D||D()}function V(){z.value=!1}return _((()=>{J(),h(),z.value=!0})),B((()=>t.repeatNum),(()=>{P(),J()})),C.useEventListener(document,"keydown",(function({code:e}){e===K.esc&&V()})),C.useResizeObserver(E,(()=>{H.value=E.value.getBoundingClientRect().height})),s({visible:z,bottom:Z,close:V}),(e,s)=>(o(),S(y,{name:m(v).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:s[0]||(s[0]=s=>e.$emit("destroy")),persisted:""},{default:i((()=>[d(p("div",{id:e.id,ref_key:"messageRef",ref:E,class:c([m(v).b(),{[m(v).m(e.type)]:e.type},m(v).is("center",e.center),m(v).is("closable",e.showClose),e.customClass]),style:k(m(G)),role:"alert",onMouseenter:P,onMouseleave:J},[e.repeatNum>1?(o(),S(m(Q),{key:0,value:e.repeatNum,type:m(j),class:c(m(v).e("badge"))},null,8,["value","type","class"])):I("v-if",!0),m(R)?(o(),S(m(L),{key:1,class:c([m(v).e("icon"),m(F)])},{default:i((()=>[(o(),S(M(m(R))))])),_:1},8,["class"])):I("v-if",!0),r(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(o(),l($,{key:1},[I(" Caution here, message could've been compromised, never use user's input as message "),p("p",{class:c(m(v).e("content")),innerHTML:e.message},null,10,se)],2112)):(o(),l("p",{key:0,class:c(m(v).e("content"))},f(e.message),3))])),e.showClose?(o(),S(m(L),{key:2,class:c(m(v).e("closeBtn")),onClick:w(V,["stop"])},{default:i((()=>[u(m(a))])),_:1},8,["class","onClick"])):I("v-if",!0)],46,ee),[[g,z.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","message.vue"]]);let ae=1;const oe=e=>{const s=!e||z(e)||H(e)||D(e)?{message:e}:e,t={...V,...s};if(t.appendTo){if(z(t.appendTo)){let e=document.querySelector(t.appendTo);F(e)||(e=document.body),t.appendTo=e}}else t.appendTo=document.body;return t},le=({appendTo:e,...s},t)=>{const n="message_"+ae++,a=s.onClose,o=document.createElement("div"),l={...s,id:n,onClose:()=>{null==a||a(),(e=>{const s=X.indexOf(e);if(-1===s)return;X.splice(s,1);const{handler:t}=e;t.close()})(p)},onDestroy:()=>{j(null,o)}},r=u(ne,l,D(l.message)||H(l.message)?{default:D(l.message)?l.message:()=>l.message}:null);r.appContext=t||re._context,j(r,o),e.appendChild(o.firstElementChild);const i=r.component,d={close:()=>{i.exposed.visible.value=!1}},p={id:n,vnode:r,vm:i,handler:d,props:r.component.props};return p},re=(e={},s)=>{if(!C.isClient)return{close:()=>{}};if(a(E.max)&&X.length>=E.max)return{close:()=>{}};const t=oe(e);if(t.grouping&&X.length){const e=X.find((({vnode:e})=>{var s;return(null==(s=e.props)?void 0:s.message)===t.message}));if(e)return e.props.repeatNum+=1,e.props.type=t.type,e.handler}const n=le(t,s);return X.push(n),n.handler};P.forEach((e=>{re[e]=(s={},t)=>{const n=oe(s);return re({...n,type:e},t)}})),re.closeAll=function(e){for(const s of X)e&&e!==s.props.type||s.handler.close()},re._context=null;const ue=R(re,"$message");export{ue as E};