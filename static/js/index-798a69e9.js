import{g as a,am as e,r as l,m as s,w as t,M as u,v as i,F as o,R as r,y as n,N as p,O as v,x as d,G as m,P as c,I as b,J as f,ar as j}from"./index-f9778aca.js";import"./el-input-bdf7543d.js";import{a as g,b as y}from"./el-select-75bb5f2c.js";import"./el-scrollbar-cdb5ed44.js";import"./el-popper-9846936e.js";import{E as h}from"./el-button-b84d105f.js";import"./icon-8ee75a79.js";import"./typescript-a312af3e.js";import"./event-b1948b12.js";import"./index-928a3db6.js";import"./index-435ff265.js";import"./aria-bf06b440.js";import"./scroll-957f651b.js";import"./index-9689f01d.js";import"./constants-9957b712.js";import"./focus-trap-08c2f2ec.js";const x={class:"pagination-container"},w={class:"pagination-info"},_=j(a({__name:"index",props:{requestMethod:{},label:{default:"label"},value:{default:"value"},requestParams:{default:{}},teleported:{type:Boolean,default:!1}},emits:["change","modelValue:update"],setup(a,{emit:j}){const _=a,{requestMethod:V,label:z,value:M,requestParams:q}=e(_),C=l(""),k=l(1),I=l(10),N=l(0),P=l([]),B=l([]),F=async(a,e)=>{P.value=await(async(a,e)=>{try{const l=await V.value({pageNum:a,pageSize:e,...q.value});return N.value=l.data.total,B.value=l.data.list,l.data.list.map((a=>({label:a[z.value],value:a[M.value]})))}catch(l){return[]}})(a,e)},G=async a=>{a>=1&&a<=J.value&&(k.value=a,await F(a,I.value))},J=s((()=>Math.ceil(N.value/I.value)));t(k,(async a=>{await F(a,I.value)}));const O=j,A=a=>{if(a)return;const e=B.value.find((a=>a[M.value]===C.value));e&&(O("change",e||{}),O("modelValue:update",C.value))};return u((async()=>{await F(k.value,I.value)})),(a,e)=>{const l=g,s=h,t=y;return i(),o("div",null,[r(t,f({class:"w100 page-select-popper",modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=a=>C.value=a),size:"default",onChange:A,onVisibleChange:A,clearable:"",filterable:""},a.$attrs,{"popper-class":"page-select-popper"}),{default:n((()=>[(i(!0),o(p,null,v(P.value,(a=>(i(),d(l,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128)),m("div",x,[r(s,{onClick:e[0]||(e[0]=a=>G(k.value-1)),disabled:k.value<=1,size:"small"},{default:n((()=>[c(" 上一页 ")])),_:1},8,["disabled"]),m("span",w,b(k.value)+"/"+b(J.value),1),r(s,{onClick:e[1]||(e[1]=a=>G(k.value+1)),disabled:k.value>=J.value,size:"small"},{default:n((()=>[c(" 下一页 ")])),_:1},8,["disabled"])])])),_:1},16,["modelValue"])])}}}),[["__scopeId","data-v-ba893056"]]);export{_ as default};