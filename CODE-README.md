# Git 提交规范

为了使代码管理更加规范和清晰，我们需要将 Git 提交信息标准化。

## 提交信息格式

每一次的 Git 提交信息应该包括以下三部分：

```
<type>(<scope>): <subject>
<空行>
<body>
<空行>
<footer>
```

`<type>(< scope >): <subject>`是必需的。

注意英文冒号并且加上空格，以及范围前后的空格

### 类型（type）

类型代表了本次提交的类型。我们定义了以下 标准类型：

-  **feat**: 新功能
-  **fix**: 修复问题
-  **docs**: 文档修改
-  **style**: 代码风格调整（比如修改空格、换行符等等，不影响代码含义的修改）
-  **refactor**: 代码重构（既不是新增功能也不是修复问题的代码修改）
-  **test**: 测试用例新增、修改、删除等
-  **chore**: 对构建、打包工具、文档生成等辅助工具的修改
-  **revert**：表示此次提交是撤销之前的某次提交
-  **perf**：表示此次提交是对代码进行了优化，如改进了算法或数据结构等
-  **build**：表示此次提交是对构建系统或外部依赖的修改，如升级了某个依赖库或修改了 CI/CD 配置等
-  **ci**：表示此次提交是对 CI/CD 配置进行了修改，如增加了工作流或修改了触发条件等
-  **merge** 合并他人代码

### 范围（scope）

范围指的是本次提交的影响范围。当然，如果这次修复或新增的代码只涉及一个文件或者一个模块，那么 scope 可以填当期模块或文件。范围较大则用 \* 标识

### 主题（subject）

主题要求的是本次 Git 提交的简短描述，即该提交的标题。请尽量让标题简洁、清晰且含义明确。

### 正文（body）

正文是可选的，主要用于详细阐述本次提交的内容。尽管有些提交可能无需正文，但如果有困惑或者需求背景的话，正文会让 commit 更容易理解且阅读更加清晰。

### 页脚（footer）

页脚也是可选的，主要包含一些技术相关信息（例如 issue、break change 等），并允许跨项目追踪对应事项的信息。此外，还可以使用一些特殊的关键词，比如：

-  `BREAKING CHANGE`: 改变代码库之前的 API，包括非向后兼容性修改之类的事项。
-  `Closes`: 关闭一个 Issue。

## 示例

这里有几个例子。这并不是一个普遍适用的列表，请根据实际情况进行调整。
**详情信息格式:**

```
git commit -m "fix(zw-tree): 修复了树组件中标签属性的错误" -m "在树组件的模板中，修复了因属性绑定错误导致的标签显示问题。"
```

**破坏性格式:**

```
git commit -m "fix(common): 修复模块依赖" -m "模块依赖于 `models.js` 模块，但文件修改导致依赖关系错误，已更正。BREAKING CHANGE: 修复了 `models.js` 的导出接口，这可能会影响依赖于旧接口的模块。"
```

**解决 issues:**
如果你的提交是为了解决一个已经报告的问题（issue），并且你使用的是像 GitHub 这样的平台（有人提交 Issue），你可以在提交信息中引用该问题的编号。这样做可以在提交和问题之间创建一个链接，使其他人能够轻松跟踪问题的解决过程。例如，如果提交解决 Issue #123 的代码，那么在提交信息中写上 “Fixes #123” 就会自动将问题标记为已解决。

```
git commit -m "fix(common): 修复模块依赖错误，Fixes #123" -m "修复了模块对 `models.js` 的依赖关系。之前的依赖关系错误导致模块无法正确加载。BREAKING CHANGE: 修复了 `models.js` 的导出接口。如果你之前依赖于错误的导出，请更新你的导入语句以匹配新的接口。"
```

**禅道 bug 修复:**
使用禅道（ZenTao）来跟踪问题，并且你想在 Git 提交信息中引用一个禅道上的 bug，你可以在提交信息中包含该 bug 的 ID 或者链接。虽然 Git 提交信息不会自动与禅道集成，但这样做可以为查看代码历史的人提供一个参考，以便他们可以手动查找相关的 bug 详情。

```
git commit -m "fix(common): 修复模块依赖错误" -m "修复了模块对 `models.js` 的依赖关系。之前的依赖关系错误导致模块无法正确加载。相关禅道 bug ID: 456。"
```

**小结**
🎉 最后，保证早上拉取代码，晚上提交当日代码，最好一个功能提交一次方便清晰管理
当然，见仁见智、约定大于规定规则~
一般来说，最佳实践是将每个功能、修复或更改作为单独的提交进行。这样做有几个好处：

1. 可追溯性：每个提交都对应一个具体的更改，这使得追踪特定功能或修复的历史变得更加容易。
2. 可读性：清晰的提交历史使得其他开发者更容易理解每次提交的目的。
3. 回滚：如果引入了问题，可以轻松地回滚到特定的提交。
4. 代码审查：小的、专注的提交使得代码审查过程更加高效。

例如，如果你正在开发一个新功能，你可能会将其分解为多个小任务，每个任务完成后都进行一次提交。这样，每个提交都是自包含的，描述了一个逻辑上的更改。

然而，有时候，如果多个小更改紧密相关并且分开提交会导致中间状态不稳定或者测试无法通过，那么将它们合并为一个提交可能更有意义。

总之，你应该根据更改的大小、影响范围以及团队的工作流程来决定是单独提交还是合并提交。确保每个提交都是可以独立运行的，并且提交信息清晰地描述了所做的更改。

## 参考资料

-  [Conventional Commits 规范](https://www.conventionalcommits.org/en/v1.0.0/)
-  [W3C HTML5 规范](https://html.spec.whatwg.org/multipage/introduction.html#abstract)
-  [W3C CSS 规范](https://www.w3.org/Style/CSS/)
-  [ECMAScript 规范](https://www.ecma-international.org/publications/standards/Ecma-262.htm)
-  [Vue 官方文档](https://cn.vuejs.org/v2/guide/)
